# TroubleShoot.md - 최종 안정화 및 품질 개선 이력

## 1. Render 139 에러 (OOM 해결)
- **원인**: 대량의 히스토리 데이터 동시 수집 시 512MB 메모리 한계 초과.
- **해결**: 히스토리 수집을 1분 간격으로 분산 실행(Sequential Fetching)하여 안정성 확보.

## 2. 화면 깜빡임 및 데이터 소실 해결
- **문제**: 데이터 갱신 시마다 DOM 전체가 삭제되었다가 다시 그려지며 'Flicker' 현상 발생. 또한 서버 지연 시 데이터가 일시적으로 사라짐.
- **해결**:
    1. **DOM 재사용**: `renderLayout`에서 동일 카테고리 체크 로직 추가 및 `updateUI`를 통한 텍스트 노드 직접 수정.
    2. **데이터 병합 전략**: 프론트엔드에서 `Object.assign`을 사용하여 서버 응답이 지연되거나 일부 누락되어도 기존 값을 보존.
    3. **localStorage 영속성**: 브라우저 로컬 저장소를 활용하여 페이지 최초 로드 시 서버 통신 전에도 이전 데이터를 즉시 표시.

## 3. 스케줄링 및 수집 주기 최적화
- **구조**:
    - **실시간(30초/5분)**: 주요 지표 및 환율.
    - **정기(매일)**: 
        - 경제 지표 (00:00, 12:00)
        - **히스토리 차트 (매일 01:10)**: 하루 1회 집중 갱신으로 안정성 확보.
    - **초기 수집**: 서버 가동 시 `run_startup_jobs`를 통해 전 지표 즉시 최신화.

## 4. 최종 결과
- Render Free 플랜 환경에서 **메모리 안정성(No 139 Error)**과 **사용자 경험(No Flicker, Persistence)**을 동시에 달성했습니다.
